<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>@project.name@ Version Information</title>
    </head>
    <body>
        <h1>Test data input form</h1>
		<h3>Version: <span id="project.version">@project.version@</span> built @timestamp@</h3>
		
		<form id='statsForm'> <!-- action="/statistics/calculate" method="POST"> -->
			<span>Input data:</span><br>
			<textarea rows="15" cols="75" name="data" id="data"></textarea>
		</form>
			<button name="calculate" id="calc" style="margin-left:300px;">Calculate</button>
		<br><hr><br>
		<span>Overall Statistics:</span><br>
		<textarea rows="12" cols="50" name="stats" id="statsOverall"></textarea>
		<br>
		<span>Monthly Statistics:</span><br>
		<textarea rows="15" cols="150" name="stats" id="statsMonthly"></textarea>
		<p id="msg"></p>
		<br>
		<p>This calculates various monthly percentiles using 
		<a href="https://www.itl.nist.gov/div898/handbook/prc/section2/prc262.htm">NIST 7.2.6.2.Percentiles</a> 
		</p>
		
    </body>
	<script src="https://code.jquery.com/jquery-3.3.1.min.js"
  		integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  		crossorigin="anonymous">
  	</script>
	<script>
		$('#calc').click(function(){
			$.post("/statistics/calculate", $('#statsForm').serialize())
			.done(function(resp) {
				var re = new RegExp(',', 'g');
				$('#statsOverall').text(JSON.stringify(resp.overall).replace(re,'\n').replace('{','').replace('}'))
				$('#statsMonthly').text(JSON.stringify(resp.monthly).replace(re,'\n'))
				$('#msg').text('success')
			})
			.fail(function(resp){
				$('#msg').text(resp.responseText)
			})
		})
	</script>
</html>